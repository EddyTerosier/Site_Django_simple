<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <title>Détail — To-Do</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
      :root{--bg:#0f172a;--card:#111827;--muted:#94a3b8;--text:#e5e7eb;--primary:#3b82f6;--ok:#22c55e;}
      *{box-sizing:border-box} body{margin:0;background:linear-gradient(180deg,#0b1020,#0f172a);}
      .wrap{max-width:920px;margin:0 auto;padding:24px;color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,sans-serif}
      .nav{display:flex;gap:12px;align-items:center;justify-content:space-between;background:#0b1224;border:1px solid #1f2937;border-radius:16px;padding:12px 16px;position:sticky;top:0}
      .brand{display:flex;align-items:center;gap:10px;font-weight:700}
      .brand .logo{width:28px;height:28px;border-radius:8px;background:linear-gradient(135deg,var(--primary),#7c3aed)}
      .links a{color:var(--text);text-decoration:none;padding:8px 10px;border-radius:10px}
      .links a:hover{background:#1f2937}
      .card{background:var(--card);border:1px solid #1f2937;border-radius:16px;padding:20px;margin-top:18px}
      .pill{display:inline-block;padding:4px 10px;border-radius:999px;background:#1f2937;border:1px solid #263144;font-size:12px}
      .muted{color:var(--muted)}
      .btn{appearance:none;border:1px solid #2b3a51;background:var(--primary);color:#fff;padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:600}
      .btn:hover{filter:brightness(1.05)}
      .badge{font-size:12px;border:1px solid #263144;background:#111a2a;border-radius:8px;padding:2px 8px;margin-left:6px}
    </style>
  </head>
  <body>
    <div class="wrap">
      <nav class="nav">
        <div class="brand"><span class="logo"></span> To-Do</div>
        <div class="links">
          <a href="/">Accueil</a>
          <a href="/about/">À propos</a>
          <a href="/tasks/">Toutes</a>
          <a href="/tasks/active/">Actives</a>
        </div>
      </nav>

      <article class="card">
        <h1 style="margin:0 0 8px 0">Détail de la tâche</h1>
        <p class="muted">Aujourd’hui : <span class="pill">{{ today }}</span></p>

        <h2 style="margin:.5rem 0">{{ task.title }}
          <span class="badge">{% if task.completed %}✅ Terminé{% else %}⬜ À faire{% endif %}</span>
        </h2>
        <p class="muted">Créée le {{ task.created_at|date:"d/m/Y H:i" }}</p>

        <form action="{% url 'tasks:toggle' task.pk %}" method="post" style="margin-top:1rem;">
          {% csrf_token %}
          <input type="hidden" name="next" value="{{ request.get_full_path }}">
          <button class="btn" type="submit">
            {% if task.completed %}Rendre active{% else %}Marquer terminée{% endif %}
          </button>
        </form>
      </article>
    </div>
  </body>
</html>